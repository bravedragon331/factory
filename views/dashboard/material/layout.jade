extends ../layout
block content  
  section.content
    block page-header  
    .page-body
      .panel.panel-default
        .panel-body
          form.form-horizontal.search-form
            .form-group.has-feedback
              .col-md-2
                label Buyer
                select.form-control.buyer(data-placeholder='Select buyer...')
                  option(value='-1') Not Selected
                  - for (var i = 0; i < customers.length; i++){
                      option(value='#{customers[i].id}') #{customers[i].name}
                  - }
              .col-md-2
                label In Date
                input.form-control.js-daterange-picker-rangesoption-2.in-date(type='text')
                span.glyphicon.glyphicon-calendar.form-control-feedback
              .col-md-1
                label Material Type
                select.form-control.material-type(data-placeholder='Not Selected')
                  option(value='-1') Not Selected
                  - for (var i = 0; i < materialtype.length; i++){
                      option(value='#{materialtype[i].name}') #{materialtype[i].name}
                  - }
              .col-md-2
                label Material
                select.form-control.material(data-placeholder='Not Selected')
                  option(value='-1') Not Selected
              .col-md-2
                label Color
                select.form-control.color(data-placeholder='Input color name or select...')
                  option(value='-1') Not Selected
                  - for(var i = 0; i < colors.length; i++){
                      option(value='#{colors[i].code}') #{colors[i].name}
                  - }
              .col-md-1
                label PO#
                input.form-control.po(type='text', placeholder='PO#')
              .col-md-1
                label Style/File#
                input.form-control.style(type='text', placeholder='Style# or File#')
              .col-md-1
                button.btn.btn-success.pull-right(type='submit', style='margin-top: 28px; width: 100px;')
                  i.fa.fa-search
                  |  Search

      block page-body
block script
  script(src='/assets/plugins/bootstrap-daterangepicker/daterangepicker.js')
  script(src='/assets/js/pages/forms/form-report.js')
  script.
    $('.buyer').select2();
    $('.material-type').select2();
    $('.material').select2();
    $('.color').select2();

    $('.material-type').on('change', function(){
      $.ajax({
        url: '/dashboard/codes/submaterial_list',
        type: 'POST',
        data: {
          type: $('.material-type').val()
        },
        success: function(result){
          if(result.isSuccess){
            $(".material").select2("destroy");
            $('.material').html("");
            $('.material').append(
                '<option value="-1">Not Selected</option>'
            );
            $.each(result.list, function(index, value) {
              $('.material').append(
                '<option value="' + result.list[index].id + '">' + result.list[index].name + '</option>'
              );
            });
            $(".material").select2();            
          }else{
            alert('Cannot get material types.')
          }
        }
      })
    })
  block script2